{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/reviews.css' %}">
    <title>gallery</title>
</head>
<body>
    <header class="header-reviews" id="gallery-header">
        <nav class="nav-reviews">
            <!-- 1. Бургер -->
            <button class="nav-reviews__toggle" aria-label="Открыть меню">☰</button>

            <div class="nav-reviews__logo-block">
                <a href="{% url 'home' %}">
                    <img src="/static/images/Lovi Moment logo-1.png" alt="Логотип" class="nav-tour__logo">
                </a>
            </div>

            <!-- 2. Само меню -->
            <div class="nav-reviews__menu" id="reviewsMenu">
                <ul class="nav-reviews__list">
                <li><a href="{% url 'about_us' %}">О нас</a></li>
                <li class="nav-tour__item nav-tour__dropdown">
                        <a href="{% url 'tour' %}" class="nav-tour__link">Туры</a>
                        <ul class="nav-tour__submenu">
                            <li><a href="{% url 'tour' %}">Кыргызстан</a></li>
                            <li><a href="{% url 'kz' %}">Казахстан</a></li>
                            <li><a href="{% url 'uz' %}">Узбекистан</a></li>
                        </ul>
                    </li>
                <li><a href="{% url 'gallery' %}">Галерея</a></li>
                <li><a href="{% url 'blog' %}">Блог</a></li>
                <li><a href="{% url 'partners' %}">Партнёрам</a></li>
                </ul>
            </div>

            <div class="nav-reviews__action">
                <button class="nav-reviews__btn">
                Записаться на тур!
                </button>
                <span class="nav-reviews__lang">En</span>
            </div>
        </nav>
        <div class="long-arrow-black">
            <a href="{% url 'home' %}"><img src="/static/images/bgblarr.png" alt=""></a>
        </div>
        <section class="reviews-hero">
            
            <!-- Хлебные крошки -->
            <div class="reviews-hero__breadcrumb">
                <a href="{% url 'home' %}" class="reviews-hero__link">Главная</a>
                <span class="reviews-hero__sep"><img src="/static/images/lilblarr.png" alt=""></span>
                <span class="reviews-hero__current">Галерея</span>
            </div>

            <!-- Заголовок-изображение -->
            <div class="reviews-hero__title">
                <h1 class="BigName" id="orangeName">ГАЛЕРЕЯ</h1>
            </div>
        </section>
    </header>
    
    <section class="Dj-gallery">
        <div class="mosaic-gallery">
            <div class="mosaic-item"><img src="{% static 'images/gall1.jpg' %}" alt="Фотография 1"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_7_2025-09-02_02-10-36.jpg' %}" alt="Фотография 2"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_10_2025-09-02_03-32-24.jpg' %}" alt="Фотография 3"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_9_2025-09-02_03-32-24.jpg' %}" alt="Фотография 4"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_16_2025-09-02_03-32-24.jpg' %}" alt="Фотография 5"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_18_2025-09-02_03-32-24.jpg' %}" alt="Фотография 6"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_1_2025-09-02_03-32-24.jpg' %}" alt="Фотография 7"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_6_2025-09-02_02-10-36.jpg' %}" alt="Фотография 8"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_5_2025-09-02_03-32-24.jpg' %}" alt="Фотография 7"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_4_2025-09-02_03-32-24.jpg' %}" alt="Фотография 8"></div>
            <div class="mosaic-item"><img src="{% static 'images/photo_17_2025-09-02_03-32-24.jpg' %}" alt="Фотография 8"></div>
        </div>
    </section>
    <section class="big-gallery-butt">
        <a href="https://www.instagram.com/lovimoment_travel/" style="text-decoration: none;">
            <button class="gallery-butt" >Смотреть еще фото! <img src="/static/images/Arrow 1.png" alt="→" /></button>
        </a>
        
    </section>
    <footer class="footer">
            <div class="footer-inner">
                <div class="footer-col logo-col">
                    <img src="{% static 'images/Lovi Moment logo-1.png' %}" alt="Lovi Moment Travel" class="footer-logo" />
                </div>

                <div class="footer-col">
                    <h4>Главная</h4>
                    <ul>
                        <li><a href="{% url 'about_us' %}">О нас</a></li>
                        <li><a href="{% url 'blog' %}">Блог о Кыргызстане</a></li>
                        <li><a href="{% url 'corp_tour' %}">Корпоративные туры</a></li>
                        <li><a href="{% url 'indi_tour' %}">Индивидуальные туры</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                <h4>Туры</h4>
                    <ul>
                        <li><a href="{% url 'tour' %}">Кыргызстан</a></li>
                        <li><a href="{% url 'kz' %}">Казахстан</a></li>
                        <li><a href="{% url 'uz' %}">Узбекистан</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>По другим вопросам</h4>
                    <p>+996 503 904 904 </p>
                    <p>+996 705 904 904 </p>
                    <p>+996 508 904 904 </p>
                    <p>+996 505 904 904 </p>
                    <button class="footer-btn"><a href="{% url 'sign_tour' %}">Записаться на тур! </a></button>
                </div>

                <div class="footer-col address">
                    <h4>Адрес</h4>
                    <p>ул. Калык Акиева 66,<br> ТЦ Весна, 3 этаж  С13А</p>
                    <p><a  class="wattspp" href="https://wa.me/996505904904"><img src="/static/images/free-icon-logo-15713434.png" alt="" style="width: 32px; height: 32px;">996 505 904 904</a></p>

                    <p ><a class="instS" href="https://www.instagram.com/lovimoment_travel/"><img src="" alt=""><img src="/static/images/inst.png" alt="">@lovimoment_travel</a></p>
                </div>
            </div>
        </footer>
    <script>
            document.addEventListener('DOMContentLoaded', () => {
                const toggle = document.querySelector('.nav-reviews__toggle');
                const menu   = document.getElementById('reviewsMenu');
                const tourItem = document.querySelector('.nav-reviews__dropdown');

                // Открытие/закрытие основного меню
                if (toggle && menu) {
                    toggle.addEventListener('click', e => {
                        e.stopPropagation();
                        menu.classList.toggle('open');
                    });
                }

                // Подменю «Туры» кликом (для mobile)
                if (tourItem) {
                    tourItem.addEventListener('click', e => {
                        if (window.innerWidth <= 480) {
                            e.preventDefault();
                            tourItem.classList.toggle('open');
                        }
                    });
                }

                // Клик вне — закрыть всё
                document.addEventListener('click', e => {
                    if (!e.target.closest('.nav-reviews')) {
                        if (menu) menu.classList.remove('open');
                        if (tourItem) tourItem.classList.remove('open');
                    }
                });
                
                // Загрузка изображений галереи из API
                async function loadGallery() {
                    try {
                        const response = await fetch('/api/gallery');
                        const images = await response.json();
                        const galleryContainer = document.querySelector('.mosaic-gallery');
                        
                        if (!galleryContainer) return;
                        
                        if (!images || images.length === 0) {
                            // Если нет изображений из API, оставляем статические
                            return;
                        }
                        
                        // Очищаем контейнер и добавляем изображения из API
                        galleryContainer.innerHTML = '';
                        images.forEach(img => {
                            const item = document.createElement('div');
                            item.className = 'mosaic-item';
                            const imgEl = document.createElement('img');
                            imgEl.src = img.imagePath;
                            imgEl.alt = img.title || 'Фотография галереи';
                            item.appendChild(imgEl);
                            galleryContainer.appendChild(item);
                        });
                    } catch (error) {
                        console.error('Ошибка при загрузке галереи:', error);
                        // В случае ошибки оставляем статические изображения
                    }
                }
                
                loadGallery();
            });
    </script>
</body>
<script>
</script>
</html>